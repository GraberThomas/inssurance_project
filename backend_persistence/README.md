# Insurance Prediction Storage Service

## About

This service is an integral part of the overall insurance application. It is responsible for storing and managing predictions generated by insurance models. The service maintains the history of predictions, including client profile details, cost estimations, and personalized recommendations.

## Key Features

* Persistent storage of insurance predictions
* Tracking of model information used
* Retention of client profile details
* Storage of prediction metrics (MAE, confidence intervals)
* Saving of recommended insurance plans
* Historical tracking of suggestions and main influencing factors

## Prerequisites

* Python 3.8+
* Access to the main backend service (`inssurance_backend`)

## Installation and Startup

### Recommended Method (via Main Docker Compose)

The easiest way to start this service is by using the project's main docker-compose file.

### Standalone Installation (for Development)

```bash
# Clone the repository
git clone [repo-url]
cd [repo-name]

# Install dependencies
pip install -r requirements.txt

# Database setup
alembic upgrade head

# Start the service (development mode)
uvicorn app.main:app --reload
```

## Environment Variables

* `INSSURANCE_BACKEND_URL`: URL of the main backend service (default: "http\://inssurance\_backend:8000")
* `DATABASE_URL`: Database connection URL

## Test Data

The project includes a script to generate test data:

```bash
python -m app.seed.fake_data
```

## Project Structure

```
.
├── alembic/          # Database migrations
├── app/
│   ├── models/       # SQLModel models
│   ├── seed/         # Data generation scripts
│   ├── database.py   # Database configuration
│   ├── main.py       # Application entry point
│   └── schemas.py    # API input/output schemas
├── Dockerfile
├── requirements.txt
└── alembic.ini
```

## Important Notes

* This service is designed to work as a sub-service of the main application
* It is highly recommended to use the root docker-compose file for deployment
* Database migrations are managed via Alembic
